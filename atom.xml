<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
    <id>https://twFR.github.io</id>
    <title>ğŸŒŸè°­å…ˆç”Ÿâœ¨</title>
    <updated>2021-01-13T06:37:51.133Z</updated>
    <generator>https://github.com/jpmonette/feed</generator>
    <link rel="alternate" href="https://twFR.github.io"/>
    <link rel="self" href="https://twFR.github.io/atom.xml"/>
    <subtitle>æ•²ä¸å‡ºä»£ç çš„ç¨‹åºçŒ¿çš„ğŸ </subtitle>
    <logo>https://twFR.github.io/images/avatar.png</logo>
    <icon>https://twFR.github.io/favicon.ico</icon>
    <rights>All rights reserved 2021, ğŸŒŸè°­å…ˆç”Ÿâœ¨</rights>
    <entry>
        <title type="html"><![CDATA[golang unsafe package]]></title>
        <id>https://twFR.github.io/post/golang-unsafe-package/</id>
        <link href="https://twFR.github.io/post/golang-unsafe-package/">
        </link>
        <updated>2020-05-08T06:27:11.000Z</updated>
        <content type="html"><![CDATA[<p>ä½¿ç”¨unsafe.Pointeræ¥å–åˆ‡ç‰‡çš„å±æ€§</p>
<pre><code>func testPointer() {
	s := make([]int, 9, 20)
	s = append(s, 2)
	len := *(*int)(unsafe.Pointer(uintptr(unsafe.Pointer(&amp;s)) + uintptr(8)))
	cap := *(*int)(unsafe.Pointer(uintptr(unsafe.Pointer(&amp;s)) + uintptr(16)))

	dataPointer := *(*int)(unsafe.Pointer(&amp;s))
	data1 := *(*int)(unsafe.Pointer(uintptr(dataPointer)))

	fmt.Printf(&quot;len: %d cap:%d \n&quot;, len, cap)
	fmt.Printf(&quot;dataPointer: %d  data1:%d \n&quot;, dataPointer, data1)

	i := 0
	for {
		if i &gt;= len {
			break
		}
		fmt.Printf(&quot;data%d:%d \n&quot;, i, *(*int)(unsafe.Pointer(uintptr(dataPointer) + uintptr(8*i))))
		i++
	}
}
</code></pre>
<p>unsafe åŒ…ç»•è¿‡äº† Go çš„ç±»å‹ç³»ç»Ÿï¼Œè¾¾åˆ°ç›´æ¥æ“ä½œå†…å­˜çš„ç›®çš„ï¼Œä½¿ç”¨å®ƒæœ‰ä¸€å®šçš„é£é™©æ€§ã€‚ä½†æ˜¯åœ¨æŸäº›åœºæ™¯ä¸‹ï¼Œä½¿ç”¨ unsafe åŒ…æä¾›çš„å‡½æ•°ä¼šæå‡ä»£ç çš„æ•ˆç‡ï¼ŒGo æºç ä¸­ä¹Ÿæ˜¯å¤§é‡ä½¿ç”¨ unsafe åŒ…ã€‚</p>
<p>unsafe åŒ…å®šä¹‰äº† Pointer å’Œä¸‰ä¸ªå‡½æ•°ï¼š</p>
<p>é€šè¿‡ä¸‰ä¸ªå‡½æ•°å¯ä»¥è·å–å˜é‡çš„å¤§å°(Sizeof)ã€åç§»(Offsetof)ã€å¯¹é½(Alignof)ç­‰ä¿¡æ¯ã€‚</p>
<p>uintptr å¯ä»¥å’Œ unsafe.Pointer è¿›è¡Œç›¸äº’è½¬æ¢ï¼Œuintptr å¯ä»¥è¿›è¡Œæ•°å­¦è¿ç®—ã€‚è¿™æ ·ï¼Œé€šè¿‡ uintptr å’Œ unsafe.Pointer çš„ç»“åˆå°±è§£å†³äº† Go æŒ‡é’ˆä¸èƒ½è¿›è¡Œæ•°å­¦è¿ç®—çš„é™åˆ¶ã€‚</p>
<p>é€šè¿‡ unsafe ç›¸å…³å‡½æ•°ï¼Œå¯ä»¥è·å–ç»“æ„ä½“ç§æœ‰æˆå‘˜çš„åœ°å€ï¼Œè¿›è€Œå¯¹å…¶åšè¿›ä¸€æ­¥çš„è¯»å†™æ“ä½œï¼Œçªç ´ Go çš„ç±»å‹å®‰å…¨é™åˆ¶ã€‚</p>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[k8s Installation and deployment]]></title>
        <id>https://twFR.github.io/post/k8s-installation-and-deployment/</id>
        <link href="https://twFR.github.io/post/k8s-installation-and-deployment/">
        </link>
        <updated>2019-11-19T16:30:24.000Z</updated>
        <content type="html"><![CDATA[<h2 id="å‡†å¤‡">å‡†å¤‡</h2>
<ul>
<li>Macos/windowsç³»ç»Ÿç”µè„‘</li>
<li>vmwareè™šæ‹Ÿæœº</li>
<li><a href="http://old-releases.ubuntu.com/releases/18.10/ubuntu-18.10-live-server-amd64.iso">Ubuntu18.10</a></li>
<li><a href="http://m6.pc6.com/xuh6/scrt854.zip">secureCRT</a>ï¼ˆç”¨æ¥ç®¡ç†è™šæ‹Ÿæœºçš„ï¼Œæ¯”ç›´æ¥ç”¨vmwareå¥½ç”¨å¤šäº†ï¼‰</li>
<li><a href="https://download.docker.com/linux/ubuntu/dists/bionic/pool/stable/amd64/docker-ce_18.06.1~ce~3-0~ubuntu_amd64.deb">docker-ce 18.06</a></li>
</ul>
<p>ç”±äºæˆ‘æœ‰ä½ ä»¬æ‡‚å¾—çš„ä¸œè¥¿ï¼Œå¯ä»¥å»å›½å¤–ä¸‹è½½å¯¹åº”çš„é•œåƒç»„ä»¶ç­‰ï¼Œè¿˜æ˜¯æ¯”è¾ƒæ–¹ä¾¿ï¼Œå¦‚æœæ˜¯æ²¡æœ‰çš„è¯ï¼Œå¯èƒ½è¿˜å¾—é…ç½®ç½‘ç»œæºç­‰ä¸œè¥¿ä¼šæ¯”è¾ƒéº»çƒ¦</p>
<h2 id="å®‰è£…ubuntu">å®‰è£…ubuntu</h2>
<p>æˆ‘æ˜¯ç”¨çš„macè£…çš„vnwareï¼Œåœ¨è™šæ‹Ÿæœºé‡Œé¢è£…çš„ubuntuï¼Œè¿˜æ˜¯è›®ç®€å•çš„ï¼Œæ³¨æ„çš„æ˜¯éœ€è¦è‡³å°‘ç»™è™šæ‹Ÿæœºcpuåˆ†é…ä¸¤æ ¸ï¼Œk8sè‡³å°‘è¦ä¸¤æ ¸æ‰èƒ½å®‰è£…</p>
<h4 id="å®‰è£…éœ€è¦çš„è½¯ä»¶">å®‰è£…éœ€è¦çš„è½¯ä»¶</h4>
<p>å®‰è£…ä¸€äº›åŸºç¡€å·¥å…·</p>
<blockquote>
<p>sudo apt-get update &amp;&amp; apt-get install -y curl telnet wget man \</p>
</blockquote>
<blockquote>
<p>apt-transport-https ca-certificates software-properties-common vim</p>
</blockquote>
<h2 id="å®‰è£…docker">å®‰è£…docker</h2>
<ul>
<li>
<p>ä¸‹è½½docker18.06çš„ç¦»çº¿å®‰è£…åŒ…  [18.06]</p>
</li>
<li>
<p>scpåˆ°è‡ªå·±çš„è™šæ‹Ÿæœºä¸Šé¢å»</p>
<p>å…ˆæŸ¥çœ‹è‡ªå·±è™šæ‹Ÿæœºçš„ipåœ°å€ï¼šifconfig<br>
ç„¶å scp docker-ce_18.06.1_ce_3-0_ubuntu_amd64.deb tan@172.16.234.132:/home/tan/package</p>
</li>
</ul>
<p>æå®š</p>
<ul>
<li>
<p>ç¦»çº¿å®‰è£…è™šæ‹Ÿæœº</p>
<blockquote>
<p>sudo dpkg -i  docker-ce_18.06.1_ce_3-0_ubuntu_amd64.deb</p>
</blockquote>
<p>æˆ‘å®‰è£…é‡åˆ°äº†é”™è¯¯ æç¤ºæˆ‘ä¾èµ–ç¼ºå¤± ç„¶åæˆ‘å°±å®‰è£…ä¾èµ–</p>
<blockquote>
<p>sudo apt-get install -y libltd17</p>
</blockquote>
<p>ç„¶ååˆæç¤ºæˆ‘æ‰¾ä¸åˆ°åŒ…ï¼Œåº”è¯¥å°±æ˜¯æºæ–‡ä»¶çš„é—®é¢˜ï¼Œæ›´æ–°ä¸‹æºæ–‡ä»¶</p>
<blockquote>
<p>#ä»…æ£€æŸ¥ï¼Œä¸æ›´æ–°</p>
<p>sudo apt update</p>
<p>#æ›´æ–°å·²å®‰è£…çš„è½¯ä»¶åŒ…</p>
<p>sudo apt upsade</p>
</blockquote>
<p>è§£å†³ä¹‹åé‡æ–°å®‰è£…dockerï¼Œæå®š</p>
</li>
<li>
<p>å…è®¸å¼€æœºå¯åŠ¨docker</p>
<blockquote>
<p>sudo systemctl enable docker</p>
<p>sudo systemctl start docker</p>
</blockquote>
</li>
<li>
<p>å¯åŠ¨ä¸€ä¸ªç²¾ç®€çš„æ“ä½œç³»ç»Ÿå®¹å™¨æµ‹è¯•</p>
<blockquote>
<p>sudo docker run -ti alpine:latest sh</p>
</blockquote>
</li>
<li>
<p>å°†å½“å‰çš„æ™®é€šç”¨æˆ·æ·»åŠ åˆ°å½“å‰çš„dockerç”¨æˆ·ç»„é‡Œé¢å»</p>
<blockquote>
<p>sudo groupadd docker</p>
<p>sudo usermod -aG docker $USER</p>
</blockquote>
</li>
</ul>
<h2 id="kuberneteså®‰è£…">kuberneteså®‰è£…</h2>
<ul>
<li>
<p>å…è´¹çš„é˜¿é‡Œäº‘é•œåƒåŠ é€Ÿå™¨</p>
<p>https://ozcouvlb.mirror.aliyuncs.com</p>
</li>
<li>
<p>é…ç½®å›½å†…é•œåƒåŠ é€Ÿå™¨</p>
<blockquote>
<p>vim /etc/docker/daemon.json</p>
<p>#æ–‡ä»¶é‡Œçš„å†…å®¹å¦‚ä¸‹ï¼š</p>
<p># {</p>
<p>#	&quot;registry-mirrors&quot;:  [https://ozcouvlb.mirror.aliyuncs.com]</p>
<p>#}</p>
</blockquote>
</li>
<li>
<p>é‡å¯dockeræœåŠ¡</p>
<blockquote>
<p>sudo systemctl daemon-reload</p>
<p>sudo systemctl restart docker</p>
</blockquote>
</li>
<li>
<p>é…ç½®å¹¶å®‰è£…k8sæº</p>
</li>
<li>
<p>åˆ›å»ºé…ç½®æ–‡ä»¶</p>
<blockquote>
<p>sudo vim /etc/apt/sources.list.d/kubernetes.list</p>
<p>#æ·»åŠ ä»¥ä¸‹å†…å®¹</p>
<p>#deb https://mirrors.ustc.edu.cn/kubernetes/apt kubernets-xenial main</p>
<p>sudo chmod 640 /etc/apt/sources.list.d/kubernetes.list</p>
</blockquote>
</li>
<li>
<p>æ‰§è¡Œå¦‚ä¸‹å‘½ä»¤æ›´æ–°æ“ä½œç³»ç»Ÿæº</p>
</li>
</ul>
<pre><code>&gt; sudo apt update
</code></pre>
<ul>
<li>
<p>æœ‰å¯èƒ½é‡åˆ°çš„é—®é¢˜ NO_PUBKEY,è§£å†³æ–¹æ³•å¦‚ä¸‹ï¼š</p>
<blockquote>
<p>#æ·»åŠ è®¤è¯ ä¸€å®šè¦ç”¨è‡ªå·±çš„è´¦æˆ·æ‰§è¡Œï¼Œä¸èƒ½ç”¨root</p>
</blockquote>
<blockquote>
<p>sudo gpg --keyserver keyserver.ubuntu.com --recv-keys BA07F4FB(å›æ˜¾NO_PUBKEYçš„å8ä½)</p>
<p>sudo gpg --export --armor BA07F4FB</p>
<p>#å°†å›æ˜¾çš„keyä¿å­˜åˆ°ä¸€ä¸ªæ–‡ä»¶é‡Œé¢</p>
<p>vim pubkey</p>
<p>#å°†leyæ·»åŠ åˆ°æœ¬åœ°çš„truestedæ•°æ®åº“ä¸­</p>
<p>sudo apt-key add pubkey</p>
</blockquote>
</li>
<li>
<p>è§£å†³åå†æ¬¡æ›´æ–°ï¼Œå®Œç¾æå®š</p>
</li>
<li>
<p>ç¦æ­¢åŸºç¡€è®¾æ–½</p>
<ul>
<li>å…³é—­é˜²ç«å¢™ï¼ˆå®¹å™¨ä¹‹é—´é€šè®¯ä¸éœ€è¦è¿™äº›é™åˆ¶,è¯è¯´æˆ‘ä¹‹å‰ç”¨winä¸€ç›´ä¹Ÿéƒ½æ˜¯å…³é—­çš„ï¼‰</li>
</ul>
<blockquote>
<p>sudo ufw disable</p>
</blockquote>
<ul>
<li>
<p>å…³é—­swap(k8sä¸å¸Œæœ›ä½¿ç”¨swap)</p>
<blockquote>
<p>sudo swapoff -a</p>
<p>æ°¸ä¹…å…³é—­</p>
<p>sudo sed -i 's/.*swap.*/#$/' /etc/fstab</p>
</blockquote>
</li>
<li>
<p>ç¦æ­¢selinuxï¼ˆubuntué»˜è®¤å®‰è£…çš„å®‰å…¨ç»„ä»¶ï¼‰</p>
<blockquote>
<p>#å®‰è£…æ“æ§selinuxçš„ç»„ä»¶</p>
<p>sudo apt install -y selinux-utils</p>
<p>#ç¦æ­¢selinux</p>
<p>setenforce 0</p>
<p>#é‡å¯</p>
<p>shutdown -r now</p>
<p>#æŸ¥çœ‹æ˜¯å¦å…³é—­</p>
<p>sudo getenforce</p>
</blockquote>
</li>
</ul>
</li>
<li>
<p>k8sç³»ç»Ÿç½‘ç»œé…ç½®</p>
<ol>
<li>é…ç½®å†…æ ¸å‚æ•°ï¼Œå°†æ¡¥æ¥çš„IPv4æµé‡ä¼ é€’åˆ°iptablesçš„é“¾</li>
</ol>
<p>åˆ›å»ºé…ç½®æ–‡ä»¶</p>
<blockquote>
<p>sudo vim /etc/sysctl.d/k8s.conf</p>
</blockquote>
<p>æ·»åŠ å¦‚ä¸‹å†…å®¹ï¼š</p>
<blockquote>
<p>net.bridge.bridge-nf-call-ip6tables = 1</p>
<p>net.bridge.bridge-nf-call-iptables = 1</p>
<p>vm.swappiness = 0</p>
</blockquote>
<ol start="2">
<li>
<p>ä½¿é…ç½®æ–‡ä»¶ç”Ÿæ•ˆ</p>
<blockquote>
<p>sudo modprobe br_netfilter</p>
</blockquote>
<blockquote>
<p>sudo sysctl -p /etc/sysctl.d/k8s.conf</p>
</blockquote>
</li>
</ol>
</li>
<li>
<p>å®‰è£…k8s</p>
<blockquote>
<p>sudo apt update &amp;&amp; apt-get install -y kubelet=1.13.1-00 kubernetes-cni=0.6.0-00 kubeadm=1.13.1-00 kubectl=1.13.1-00</p>
</blockquote>
<ul>
<li>kubelet æ°¸ä¹…çš„åç«¯æœåŠ¡</li>
<li>kubectl å®¢æˆ·ç«¯è¿›ç¨‹ï¼Œç”¨æˆ·å’Œå¼€å‘è€…ä½¿ç”¨kubectlå¯ä»¥è¿ç»´ç»´æŠ¤k8s</li>
<li>kubeadm ä¹Ÿæ˜¯å®¢æˆ·ç«¯è¿›ç¨‹ï¼Œæƒé™å¾ˆé«˜ï¼Œç›¸å½“äºç®¡ç†å‘˜ï¼Œç”¨çš„å¾ˆå°‘</li>
</ul>
</li>
<li>
<p>è®¾ç½®å¼€æœºè‡ªå¯åŠ¨</p>
<blockquote>
<p>sudo systemctl enable kubelet &amp;&amp; systemctl start kubelet</p>
<p>sudo shutdown -r now</p>
</blockquote>
</li>
<li>
<p>éªŒè¯k8s</p>
<blockquote>
<p>kubectl get nodes</p>
<p>kubectl version</p>
</blockquote>
</li>
</ul>
<h2 id="åˆ›å»ºå¤šèŠ‚ç‚¹">åˆ›å»ºå¤šèŠ‚ç‚¹</h2>
<ul>
<li>
<p>å°†å·²ç»æ­å»ºå¥½çš„ç¯å¢ƒçš„è™šæ‹Ÿæœºå¤åˆ¶ä¸¤ä»½å‡ºæ¥ï¼Œæ­å»ºä¸€ä¸ªä¸‰èŠ‚ç‚¹çš„é›†ç¾¤</p>
<p>å°†å·²ç»æ­å»ºå¥½å¼€å‘ç¯å¢ƒçš„è™šæ‹Ÿæœºå…³æœºï¼Œç„¶ååˆ›å»ºå®Œæ•´å…‹éš†</p>
</li>
<li>
<p>ä¹‹åå†ç”¨ifconfigå‘½ä»¤æŸ¥çœ‹æ–°èŠ‚ç‚¹çš„ipï¼Œç”¨secureCRTç™»å½•èŠ‚ç‚¹</p>
</li>
<li>
<p>ç»™nodeé…ç½®hostname</p>
<blockquote>
<p>su</p>
<p>vim /etc/hostname</p>
<p>#åˆ†åˆ«æ”¹ä¸ºmaster/node1/node2</p>
</blockquote>
</li>
<li>
<p>é…ç½®ipåœ°å€</p>
<blockquote>
<p>vim /etc/netplan/50-cloud-init.yaml</p>
</blockquote>
</li>
</ul>
<p>network:</p>
<p>â€‹	 ethernets:</p>
<p>â€‹			ens33:</p>
<p>â€‹					addresses: [172.16.234.134/24]</p>
<p>â€‹					dhcp4: false</p>
<p>â€‹					gateway4: 172.16.234.2</p>
<p>â€‹					nameservers:</p>
<p>â€‹									addresses: [172.16.234.2]</p>
<p>â€‹					optional: true</p>
<p>â€‹			version: 2</p>
<p>æŒ‰ç…§è‡ªå·±èŠ‚ç‚¹çš„ipé…ç½®ï¼Œä¹Ÿå¯ä»¥è‡ªå·±å®šä¸ºè¿ç»­çš„ipï¼Œæ–¹ä¾¿æ“ä½œï¼Œdhcpæ”¹æˆfalseé˜²æ­¢æ¯æ¬¡é‡å¯ipå˜æ‰</p>
<p>â€‹	&gt; netplan apply</p>
<p>ä½¿é…ç½®ç”Ÿæ•ˆ</p>
<ul>
<li>
<p>ä¿®æ”¹hostsæ–‡ä»¶</p>
<blockquote>
<p>vim /etc/hosts</p>
<p>#è¾“å…¥ä»¥ä¸‹å†…å®¹</p>
<p>#172.16.234.132 master</p>
<p>#172.16.234.133 node1</p>
<p>#172.16.234.134 node2</p>
</blockquote>
</li>
</ul>
<p>ä¸‰ä¸ªèŠ‚ç‚¹å‡éœ€è¦é…ç½®,é€šè¿‡pingæ¥æ£€éªŒæ˜¯å¦é…ç½®æˆåŠŸ</p>
<h2 id="éƒ¨ç½²k8sé›†ç¾¤">éƒ¨ç½²k8sé›†ç¾¤</h2>
<ul>
<li>
<p>---------<font color=red><strong>masterèŠ‚ç‚¹ä¸Šé…ç½®</strong></font> --------</p>
</li>
<li>
<p>åˆ›å»ºk8sçš„ç®¡ç†å·¥å…·kubeadmå¯¹åº”çš„é…ç½®æ–‡ä»¶ï¼Œå€™é€‰æ“ä½œåœ¨/home/itcast/working/ ç›®å½•ä¸‹</p>
</li>
<li>
<p>ä½¿ç”¨kubeadmé…ç½®æ–‡ä»¶ï¼Œé€šè¿‡åœ¨é…ç½®æ–‡ä»¶ä¸­æŒ‡å®šdockeré•œåƒåœ°å€éƒ¨ç½²</p>
<p>ç”Ÿæˆé…ç½®æ–‡ä»¶</p>
<blockquote>
<p>kubeadm config print init-defaults ClusterConfiguration &gt; kubeadm.conf</p>
</blockquote>
</li>
<li>
<p>ä¿®æ”¹é…ç½®æ–‡ä»¶é‡Œé¢çš„ä¸‹é¢é¡¹</p>
<blockquote>
<p>vim kubeadm.conf</p>
<p>#ä¿®æ”¹k8sç‰ˆæœ¬å·ä¸ºv1.13.1</p>
<p>kubernetesVersion: v1.13.1</p>
<p>#ä¿®æ”¹hostnameä¸ºmaster</p>
<p>name: master</p>
<p>#ä¿®æ”¹kubeadm.confä¸­çš„APIæœåŠ¡å™¨åœ°å€</p>
<p>localAPIEndpoint:</p>
<p>â€‹    advertiseAddress: 172.16.234.132    # masterçš„IP</p>
<p>â€‹    bindPortï¼š6443</p>
<p>#é…ç½®å­ç½‘ç½‘ç»œ</p>
<p>networking:</p>
<p>â€‹    dnsDomian: cluster.local</p>
<p>â€‹    podSubnet: &quot;10.244.0.0/16&quot;         #  k8så†…éƒ¨podç½‘ç»œ,å®˜æ–¹æ¨è</p>
<p>â€‹    servicesSubnet: 10.96.0.0/12    # k8sæœåŠ¡ç½‘ç»œ,å®˜æ–¹æ¨è</p>
<p>scheduler: {}</p>
</blockquote>
</li>
<li>
<p>æ‹‰å–k8så¿…å¤‡çš„æ¨¡å—é•œåƒ</p>
<blockquote>
<p>#æŸ¥çœ‹éœ€è¦å“ªäº›é•œåƒæ–‡ä»¶éœ€è¦æ‹‰å–</p>
<p>kubeadm config images list --config kubeadm.conf</p>
<p>#k8s.gcr.io/kube-apiserver:v1.13.1.                   å¯¹å¤–ç«¯å£ï¼Œæä¾›å…¥å£è®©å¤–éƒ¨è®¿é—®é›†ç¾¤<br>
#k8s.gcr.io/kube-controller-manager:v1.13.1     å†…éƒ¨ç®¡ç†å™¨<br>
#k8s.gcr.io/kube-scheduler:v1.13.1                   å†…éƒ¨ä»»åŠ¡è°ƒåº¦å™¨<br>
#k8s.gcr.io/kube-proxy:v1.13.1                         è´Ÿè½½å‡è¡¡<br>
#k8s.gcr.io/pause:3.1                                     ä¸šåŠ¡å®¹å™¨å…±äº«Pauseå®¹å™¨çš„ç½‘ç»œæ ˆå’ŒVolumeæŒ‚è½½å·ï¼Œå› æ­¤ä»–ä»¬ä¹‹é—´é€šä¿¡å’Œæ•°æ®äº¤æ¢æ›´ä¸ºé«˜æ•ˆ<br>
#k8s.gcr.io/etcd:3.2.24                                  æ•°æ®ä¸€è‡´æ€§<br>
#k8s.gcr.io/coredns:1.2.6</p>
<p>#æ‹‰å–å…¨éƒ¨å½“å‰ç‰ˆæœ¬k8så…³è”çš„é•œåƒ</p>
<p>kubeadm config images pull --config ./kubeadm.conf</p>
<p>#å¦‚æœæ— æ³•ä¸‹è½½ï¼Œåªèƒ½å»docker.ioä»“åº“æ‰‹åŠ¨æ‹‰é•œåƒç„¶åæ”¹tagï¼ˆæˆ–è€…registry.cn-hangzhou.aliyuncs.com/google_containersï¼‰</p>
<p>docker pull mirrorgooglecontainers/kube-apiserver:v1.13.1</p>
<p>docker tag mirrorgooglecontainers/kube-apiserver:v1.13.1 k8s.gcr.io/kube-apiserver:v1.13.1 #æ‰“tagï¼Œå’Œéœ€è¦çš„é•œåƒåä¿æŒä¸€è‡´</p>
<p>docker rmi mirrorgooglecontainers/kube-apiserver:v1.13.1    #åˆ é™¤æ‰å¤šä½™çš„é•œåƒ</p>
<p>#å…¶ä»–æ‰€æœ‰é•œåƒç±»ä¼¼,k8s.gcr.io/coredns:1.2.6ç‰¹ä¾‹</p>
<p>docker pull coredns/coredns:1.1.3</p>
<p>root@tan:/home/tan/package# docker images<br>
REPOSITORY                           TAG                 IMAGE ID            CREATED             SIZE<br>
k8s.gcr.io/kube-proxy                v1.13.1             fdb321fd30a0        11 months ago       80.2MB<br>
k8s.gcr.io/kube-apiserver            v1.13.1             40a63db91ef8        11 months ago       181MB<br>
k8s.gcr.io/kube-controller-manager   v1.13.1             26e6f1db2a52        11 months ago       146MB<br>
k8s.gcr.io/kube-scheduler            v1.13.1             ab81d7360408        11 months ago       79.6MB<br>
k8s.gcr.io/etcd                      3.2.24              3cab8e1b9802        14 months ago       220MB<br>
k8s.gcr.io/coredns                   1.2.6               b3b94275d97c        18 months ago       45.6MB<br>
k8s.gcr.io/pause                     3.1                 da86e6ba6ca1        23 months ago       742kB</p>
</blockquote>
</li>
<li>
<p>åˆå§‹åŒ–k8sç¯å¢ƒ</p>
<blockquote>
<p>sudo kubeadm init --config ./kubeadm.conf</p>
</blockquote>
</li>
</ul>
<p>å›æ˜¾å¦‚ä¸‹ï¼š</p>
<pre><code>	 &gt; Your Kubernetes master has initialized successfully!
	 &gt;
	 &gt; To start using your cluster, you need to run the following as a regular user:
	 &gt;
	 &gt; â€‹    mkdir -p $HOME/.kube
	 &gt;
	 &gt; â€‹	sudo cp -i /etc/kubernetes/admin.conf $HOME/.kube/config
	 &gt;
	 &gt; â€‹	sudo chown $(id -u):$(id -g) $HOME/.kube/config
	 &gt;
	 &gt; You should now deploy a pod network to the cluster.
	 &gt; Run &quot;kubectl apply -f [podnetwork].yaml&quot; with one of the options listed at:
	 &gt;   https://kubernetes.io/docs/concepts/cluster-administration/addons/
	 &gt;
	 &gt; You can now join any number of machines by running the following on each node
	 &gt; as root:
	 &gt;
	 &gt;   kubeadm join 172.16.234.132:6443 --token abcdef.0123456789abcdef --discovery-token-ca-cert-hash sha256:ebc50ff8588c35917f9c6f84f2bd8048352b82bfb9ef06cf5b63934cb9862f49
</code></pre>
<p>æ ¹æ®æç¤ºï¼Œåšå¦‚ä¸‹æ“ä½œ</p>
<blockquote>
<p>#masterèŠ‚ç‚¹åŸºæœ¬æ–‡ä»¶å¤¹é…ç½®</p>
</blockquote>
<blockquote>
<p>mkdir -p $HOME/.kube</p>
<p>sudo cp -i /etc/kubernetes/admin.conf $HOME/.kube/config</p>
<p>sudo chown <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo>(</mo><mi>i</mi><mi>d</mi><mo>âˆ’</mo><mi>u</mi><mo>)</mo><mo>:</mo></mrow><annotation encoding="application/x-tex">(id -u):</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord mathdefault">i</span><span class="mord mathdefault">d</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault">u</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">:</span></span></span></span>(id -g) $HOME/.kube/config</p>
</blockquote>
<p>åŒæ—¶ï¼Œå¦‚æœnodeèŠ‚ç‚¹æƒ³è¦åŠ å…¥masteré›†ç¾¤ï¼Œéœ€è¦æ‰§è¡Œä»¥ä¸‹å‘½ä»¤</p>
<blockquote>
<p>kubeadm join 172.16.234.132:6443 --token abcdef.0123456789abcdef --discovery-token-ca-cert-hash sha256:ebc50ff8588c35917f9c6f84f2bd8048352b82bfb9ef06cf5b63934cb9862f49</p>
</blockquote>
<ul>
<li>
<p>å¯åŠ¨k8s</p>
<blockquote>
<p>sudo systemctl enable kubelet</p>
<p>sudo systemctl start kubelet</p>
</blockquote>
</li>
<li>
<p>éªŒè¯k8så¯åŠ¨ç»“æœ</p>
<blockquote>
<p>kubectl get node</p>
</blockquote>
</li>
</ul>
<p>å¦‚æœæœ‰é—®é¢˜ï¼Œå¯ä»¥å‚è€ƒè¿™ä¸ª <a href="https://stackoverflow.com/questions/52720380/kubernetes-api-server-is-not-starting-on-a-single-kubeadm-cluster">æ‹‰å–æœ€æ–°ç‰ˆæœ¬</a>ç„¶åé‡æ–°æ¥ä¸€éï¼Œæˆ‘å°±æ˜¯è¿™ä¸ªèŠ±äº†ä¸€ä¸‹åˆï¼ˆå¾®ç¬‘è„¸ï¼‰</p>
<p>æœªå®Œå¾…ç»­ã€‚ã€‚ã€‚</p>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[fibobacci]]></title>
        <id>https://twFR.github.io/post/fibobacci/</id>
        <link href="https://twFR.github.io/post/fibobacci/">
        </link>
        <updated>2019-11-18T15:49:09.000Z</updated>
        <content type="html"><![CDATA[<p>ä»Šå¤©ç®€å•åšä¸€ä¸ªé¢˜ï¼Œè¿™ä¸ªç‚¹äº†ï¼Œå¤ªç´¯äº†ï¼Œæ‰“å¡æ»´</p>
<h2 id="éœ€æ±‚">éœ€æ±‚</h2>
<p>ç»™ä¸€ä¸ªæ•°Nï¼Œçœ‹èƒ½é€šè¿‡å¤šå°‘æ­¥N+1æˆ–è€…N-1ä½¿å®ƒæˆä¸ºfibobacciæ•°<br>
0&lt; N &lt;1000000<br>
fibobacciéƒ½æ¸…æ¥š 0 1 1 2 3 5 8 13 ... ä¸èµ˜è¿°</p>
<h2 id="ç¤ºä¾‹">ç¤ºä¾‹</h2>
<p>è¾“å…¥ï¼š</p>
<blockquote>
<p>5<br>
15</p>
</blockquote>
<p>è¾“å‡ºï¼š</p>
<blockquote>
<p>0<br>
2</p>
</blockquote>
<h2 id="è§£é¢˜æ€è·¯">è§£é¢˜æ€è·¯</h2>
<p>è¿™ä¸ªå°±å¾ˆç®€å•ï¼Œä¸ç”¨è¯´äº†<br>
çœ‹æˆ‘æç®€ä»£ç é£æ ¼ï¼Œå“ˆå“ˆå“ˆğŸ˜‚</p>
<h2 id="æç®€ä»£ç ">æç®€ä»£ç </h2>
<pre><code>package main

import &quot;fmt&quot;

func main() {
	var number int
	for {
		if num, err := fmt.Scanf(&quot;%d&quot;, &amp;number); num != 1 || err != nil {
			return
		}
		begin, next := 0, 1
		for begin+next &lt; number {
			begin, next = next, begin+next
		}
		if number-next &lt; begin+next-number {
			fmt.Println(number - next)
		} else {
			fmt.Println(begin + next - number)
		}
	}
}

</code></pre>
<p>å½“ç„¶ä¸æ¨èï¼Œå®¹æ˜“è¢«æ‰“æ­»</p>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[binary search]]></title>
        <id>https://twFR.github.io/post/binary-search/</id>
        <link href="https://twFR.github.io/post/binary-search/">
        </link>
        <updated>2019-11-17T12:43:15.000Z</updated>
        <content type="html"><![CDATA[<h2 id="éœ€æ±‚">éœ€æ±‚</h2>
<p>å°Qçš„çˆ¶æ¯è¦å‡ºå·®Nå¤©ï¼Œèµ°ä¹‹å‰ç»™å°Qç•™ä¸‹äº†Må—å·§å…‹åŠ›ã€‚å°Qå†³å®šæ¯å¤©åƒçš„å·§å…‹åŠ›æ•°é‡ä¸å°‘äºå‰ä¸€å¤©çš„ä¸€åŠï¼Œä½†æ˜¯ä»–åˆä¸æƒ³åœ¨çˆ¶æ¯å›æ¥ä¹‹å‰æŠŠå·§å…‹åŠ›åƒå®Œï¼Œè¯·é—®ä»–<font color=red>ç¬¬</font>ä¸€å¤©<font color=red>æœ€å¤š</font>èƒ½åƒå¤šå°‘å—è›‹ç³•<br>
N&lt;=50000,N&lt;M&lt;100000</p>
<h2 id="ç¤ºä¾‹">ç¤ºä¾‹</h2>
<p>è¾“å…¥ï¼š</p>
<blockquote>
<p>3 7<br>
4 7</p>
</blockquote>
<p>è¾“å‡ºï¼š</p>
<blockquote>
<p>4<br>
3</p>
</blockquote>
<h2 id="è§£é¢˜æ€è·¯">è§£é¢˜æ€è·¯</h2>
<ul>
<li>æœ¬é¢˜å¯ä»¥æƒ³æˆï¼Œæˆ‘ä»1ï½Må—å·§å…‹åŠ›ä¸­é€‰å‡ºä¸€å—æ¥ï¼Œè¿™å—å·§å…‹åŠ›å°±æ˜¯æˆ‘ç¬¬ä¸€å¤©æœ€å¤šèƒ½åƒçš„å·§å…‹åŠ›</li>
<li>é‚£è¿™ä¸ªé€‰å‡ºæ¥çš„æœ‰ä»€ä¹ˆæ¡ä»¶éœ€è¦æ»¡è¶³å‘¢ï¼šè¦æ»¡è¶³æˆ‘é€‰å‡ºæ¥çš„è¿™ä¸ªæ˜¯ç¬¬ä¸€å¤©æœ€å¤šèƒ½åƒçš„ï¼Œé‚£ä¹ˆå°±æ˜¯æœ€åå‡ å¤©éƒ½è¦åƒæœ€å°‘çš„ï¼Œä½†åˆè¦æ»¡è¶³ä¸å°‘äºå‰ä¸€å¤©çš„ä¸€åŠï¼Œæ‰€ä»¥å°±æ˜¯åˆšå¥½åƒå‰ä¸€å¤©çš„ä¸€åŠã€‚æ³¨æ„çš„æ˜¯ï¼Œè¿™é‡Œè¦åƒå°±æ˜¯ä¸€æ•´å—ï¼Œä¸å­˜åœ¨æ˜¯åƒå‡ åˆ†ä¹‹ä¸€å—ï¼Œå¼ºè¿«ç—‡å¾ˆèˆ’æœ</li>
<li>é‚£å°±æ˜¯æˆ‘ç”¨äºŒåˆ†æŸ¥æ‰¾æ³•å»é€‰ä¸€ä¸ªå·§å…‹åŠ›æ•°å‡ºæ¥ï¼Œå»çœ‹æ˜¯å¦æ»¡è¶³æ¡ä»¶</li>
<li>è¿™ä¸ªæ¡ä»¶å‘¢å°±æ˜¯ä½ æ¯å¤©åƒçš„åŠ èµ·æ¥åˆšå¥½æˆ–è€…è¯´å°äºä½ çš„æ€»å·§å…‹åŠ›æ•°ï¼Œä¸èƒ½é¥¿æ­»å˜›ï¼Œä¿è¯æ¯å¤©éƒ½æœ‰åƒçš„</li>
</ul>
<h2 id="ä»£ç å®ç°">ä»£ç å®ç°</h2>
<pre><code>package main

import (
	&quot;fmt&quot;
	&quot;math&quot;
	&quot;os&quot;
)

// å‡ºå·®å¤©æ•°
var N int

// å·§å…‹åŠ›ä¸ªæ•°
var M int

func main() {
	for {
		num, err := fmt.Scanf(&quot;%d %d&quot;, &amp;N, &amp;M)
		if num != 2 || err != nil {
			fmt.Println(err)
			os.Exit(1)
		}
		search()
	}
}

// å‡å¦‚ç¬¬ä¸€å¤©åƒnä¸ª,è®¡ç®—æ€»å…±åƒäº†å¤šå°‘ä¸ª
func sum(n int) (m int) {
	for i := 0; i &lt; N; i++ {
		m =m + n
		n = int(math.Ceil(float64 (n) / 2))
	}
	return m
}

// äºŒåˆ†æŸ¥æ‰¾æ»¡è¶³çš„æ¡ä»¶
func search() {
	begin := 1
	end := M
	mid := 0
	if N == 1 {
		fmt.Println(M)
		return
	}
	for i := 0; i &lt; M; i++ {

		if begin &gt; end {
			break
		}
		// å‘ä¸Šå–æ•´ï¼Œè¦åƒå°±è¦åƒä¸€æ•´ä¸ª
		mid = int(math.Ceil(float64(end+begin) / 2))
		if sum(mid) == M {
			fmt.Println(mid)
			return
		}
		if sum(mid) &lt; M {
			// å–ç­‰äºæ˜¯å› ä¸ºé˜²æ­¢æ²¡æœ‰æ­£å¥½åƒå®Œçš„æƒ…å†µï¼Œéœ€è¦å–midçš„å€¼
			begin = mid
		} else {
			end = mid - 1
		}
	}
	// è¿™æ˜¯æœ‰å‰©ä½™å·§å…‹åŠ›çš„æƒ…å†µ
	fmt.Println(mid)
}
</code></pre>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[Insert sort]]></title>
        <id>https://twFR.github.io/post/insert-sort/</id>
        <link href="https://twFR.github.io/post/insert-sort/">
        </link>
        <updated>2019-11-15T15:36:02.000Z</updated>
        <content type="html"><![CDATA[<h2 id="éœ€æ±‚">éœ€æ±‚</h2>
<p>è¾“å…¥nä¸ªæ•°å­—ï¼Œï¼ˆç¬¬ä¸€è¡Œæ•°å­—è¡¨ç¤ºå°†è¦è¾“å…¥æ•°å­—çš„ä¸ªæ•°ï¼‰<br>
æŒ‰ä»å°åˆ°å¤§çš„é¡ºåºæ’åºåä¸€è¡Œè¾“å‡º</p>
<h2 id="ç¤ºä¾‹">ç¤ºä¾‹</h2>
<p>è¾“å…¥ï¼š</p>
<blockquote>
<p>5<br>
12<br>
45<br>
2<br>
14<br>
1</p>
</blockquote>
<p>è¾“å‡ºï¼š</p>
<blockquote>
<p>1 2 12 14 45</p>
</blockquote>
<h2 id="è§£é¢˜æ€è·¯">è§£é¢˜æ€è·¯</h2>
<p>ä»Šå¤©ä½¿ç”¨æ’å…¥æ’åºæ¥è§£å†³è¿™ä¸ªé—®é¢˜</p>
<ul>
<li>å¾ªç¯éœ€è¦æ’åºçš„æ•°ç»„</li>
<li>ä»ç¬¬äºŒä¸ªæ•°å­—å¼€å§‹ï¼Œå’Œå‰ä¸€ä¸ªæ¯”è¾ƒï¼Œå¦‚æœæ¯”å‰ä¸€ä¸ªå°ï¼Œå°±è¯´æ˜è¿™ç¬¬iä¸ªæ•°å­—néœ€è¦é‡æ–°æ’åº</li>
<li>å°†è¿™ä¸ªæ•°å­—å’Œå‰é¢çš„æ‰€æœ‰æ•°å­—æ¯”è¾ƒï¼Œå½“næ¯”ç¬¬jä¸ªæ•°å­—ä½ç½®å°çš„æ—¶å€™ï¼ˆj&lt;iï¼‰ï¼Œåˆ™è¯´æ˜è¿™ä¸ªjä½ç½®å°±æ˜¯néœ€è¦æ’å…¥çš„ä½ç½®</li>
<li>å°†jä½ç½®åˆ°i-1ä½ç½®çš„æ•°å­—å…¨éƒ¨é¡ºåºå‘åç§»åŠ¨ä¸€ä¸ªä½ç½®ï¼Œå³å°†ã€i-1ã€‘èµ‹ç»™ã€iã€‘ï¼Œæœ€åå°†æœ€å¼€å§‹çš„ã€iã€‘èµ‹ç»™ã€jã€‘</li>
<li>å¾ªç¯å®Œæ•°ç»„åˆ™æ’åºå®Œæ¯•ï¼Œover</li>
</ul>
<pre><code>func insertSort(disorderNumber []int) []int {
	for i := 1; i &lt; len(disorderNumber); i++ {
		if disorderNumber[i] &lt; disorderNumber[i-1] {
			for j := 0; j &lt; i; j++ {
				if disorderNumber[j] &gt; disorderNumber[i] {
					// æ’å…¥ä½ç½®
					temp := disorderNumber[i]
					// å°†æ’å…¥ä½ç½®åé¢çš„æ•°åˆ°éœ€è¦æ’å…¥çš„æ•°æ•´ä½“åç§»ä¸€ä½
					for k := i; k &gt; j; k-- {
						disorderNumber[k] = disorderNumber[k-1]
					}
					disorderNumber[j] = temp
				}
				// å¦‚æœæ‰¾åˆ°æ’å…¥ä½ç½®ï¼Œåˆ™ä¸éœ€è¦å†å‘åé¢å¾ªç¯
				break
			}
		}
	}
	return disorderNumber
}
</code></pre>
<h2 id="å®Œæ•´ä»£ç ">å®Œæ•´ä»£ç </h2>
<pre><code>package main

import (
	&quot;fmt&quot;
	&quot;os&quot;
	&quot;strconv&quot;
)

func main() {
	var num int
	n, err := fmt.Scanf(&quot;%d&quot;, &amp;num)
	if n != 1 || err != nil {
		os.Exit(1)
	}
	disorderNumber := make([]int, num)
	for i := 0; i &lt; num; i++ {
		n, err := fmt.Scanf(&quot;%d&quot;, &amp;disorderNumber[i])
		if n != 1 || err != nil {
			fmt.Println(n,err)
			os.Exit(1)
		}
	}
	orderNumber := insertSort(disorderNumber)
	for i := 0; i &lt; len(orderNumber); i++ {
		fmt.Print(strconv.Itoa(orderNumber[i]) + &quot; &quot;)
	}
}

func insertSort(disorderNumber []int) []int {
	for i := 1; i &lt; len(disorderNumber); i++ {
		if disorderNumber[i] &lt; disorderNumber[i-1] {
			for j := 0; j &lt; i; j++ {
				if disorderNumber[j] &gt; disorderNumber[i] {
					// æ’å…¥ä½ç½®
					temp := disorderNumber[i]
					// å°†æ’å…¥ä½ç½®åé¢çš„æ•°åˆ°éœ€è¦æ’å…¥çš„æ•°æ•´ä½“åç§»ä¸€ä½
					for k := i; k &gt; j; k-- {
						disorderNumber[k] = disorderNumber[k-1]
					}
					disorderNumber[j] = temp
				}
				// å¦‚æœæ‰¾åˆ°æ’å…¥ä½ç½®ï¼Œåˆ™ä¸éœ€è¦å†å‘åé¢å¾ªç¯
				break
			}
		}
	}
	return disorderNumber
}
</code></pre>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[Multiplication by large numbers]]></title>
        <id>https://twFR.github.io/post/multiplication-by-large-numbers/</id>
        <link href="https://twFR.github.io/post/multiplication-by-large-numbers/">
        </link>
        <updated>2019-11-14T14:02:22.000Z</updated>
        <content type="html"><![CDATA[<h2 id="éœ€æ±‚">éœ€æ±‚</h2>
<p>æ±‚nçš„é˜¶ä¹˜ï¼ˆ0&lt;n&lt;1000ï¼‰</p>
<h2 id="ç¤ºä¾‹">ç¤ºä¾‹</h2>
<p>è¾“å…¥ï¼š</p>
<blockquote>
<p>2<br>
3</p>
</blockquote>
<p>è¾“å‡ºï¼š</p>
<blockquote>
<p>2<br>
6</p>
</blockquote>
<h2 id="è§£é¢˜æ€è·¯">è§£é¢˜æ€è·¯</h2>
<p>æ™®é€šçš„æ•°æ®ç±»å‹è‚¯å®šæ²¡æ³•æ‰¿è½½ç²¾ç¡®çš„å¤§æ•°çš„é˜¶å±‚ï¼Œæ‰€ä»¥è¿™å®é™…å°±æ˜¯ä¸€ä¸ªå¤§æ•°ç›¸ä¹˜ç®—æ³•</p>
<ul>
<li>ç”¨ä¸€ä¸ªæ•°ç»„æ¥è£…å¤§æ•°çš„æ¯ä¸€ä½</li>
<li>ç”¨æ•°ç»„çš„æ¯ä¸€ä¸ªå€¼å»ä¹˜è¢«ä¹˜æ•°</li>
<li>å°†æ•°ç»„ä»åå¾€å‰è¿›ä½ç„¶åç•™å€¼ï¼Œå› ä¸ºæ•°å­—ç›¸é‚»ä¸¤ä½ç›¸å·®10çš„å€æ•°ï¼Œå°±ä»¥10è¿›1ï¼Œä¾‹å¦‚æ•°ç»„æœ€åä¸€ä½ä¸º102ï¼Œåˆ™å‘å‰è¿›10ï¼Œç•™2</li>
<li>æœ€åé¡ºåºæ‰“å‡ºä¸æ¢è¡Œçš„æ•°ç»„æ¯ä¸ªå€¼å°±æ˜¯ç»“æœï¼Œéœ€è¦æ³¨æ„çš„æ˜¯æ•°ç»„çš„é•¿åº¦</li>
</ul>
<pre><code>func multiplication(largeNumber [1000]int, number int) [1000]int {
	for i := 0; i &lt; len(largeNumber); i++ {
		largeNumber[i] = largeNumber[i] * number
	}
	for i := len(largeNumber) - 1; i &gt; 0; i-- {
		// è¿›ä½
		largeNumber[i-1] = largeNumber[i]/10 + largeNumber[i-1]
		// ç•™å€¼
		largeNumber[i] = largeNumber[i] % 10
	}
	return largeNumber
}
</code></pre>
<h2 id="å®Œæ•´å®ç°">å®Œæ•´å®ç°</h2>
<pre><code>package main

import (
	&quot;fmt&quot;
	&quot;os&quot;
)

func main() {
	for {
		var num int
		var largeNumber [1000]int
		n, err := fmt.Scanf(&quot;%d&quot;, &amp;num)
		if n != 1 || err != nil {
			os.Exit(1)
		}
		// æœ€åä¸€ä½ç»™1
		largeNumber[len(largeNumber)-1] = 1
		for i := 1; i &lt;= num; i++ {
			largeNumber = multiplication(largeNumber, i)
		}
		// æ•°ç»„ä¸­ä¸ä¸º0çš„ç¬¬ä¸€ä¸ªæ•°
		min := 0
		for i := 0; i &lt; len(largeNumber); i++ {
			if largeNumber[i] != 0 {
				min = i
				break
			}
		}
		for i := min; i &lt; len(largeNumber); i++ {
			fmt.Print(largeNumber[i])
		}
		fmt.Println()
	}
}

func multiplication(largeNumber [1000]int, number int) [1000]int {
	for i := 0; i &lt; len(largeNumber); i++ {
		largeNumber[i] = largeNumber[i] * number
	}
	for i := len(largeNumber) - 1; i &gt; 0; i-- {
		// è¿›ä½
		largeNumber[i-1] = largeNumber[i]/10 + largeNumber[i-1]
		// ç•™å€¼
		largeNumber[i] = largeNumber[i] % 10
	}
	return largeNumber
}
</code></pre>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[Bubble Sort]]></title>
        <id>https://twFR.github.io/post/bubble-sort/</id>
        <link href="https://twFR.github.io/post/bubble-sort/">
        </link>
        <updated>2019-11-13T12:06:43.000Z</updated>
        <content type="html"><![CDATA[<h2 id="éœ€æ±‚">éœ€æ±‚</h2>
<p>è¾“å…¥å¸¦å­˜å‚¨å•ä½çš„æ•°å€¼ï¼Œæ’åºåè¾“å‡º<br>
1G=1000Mï¼›1T=1000G</p>
<h2 id="ä¸¾ä¾‹">ä¸¾ä¾‹</h2>
<p>ï¼ˆç¬¬ä¸€è¡Œä¸ºå°†è¦è¾“å…¥çš„æ•°å€¼ä¸ªæ•°ï¼‰<br>
è¾“å…¥ï¼š</p>
<blockquote>
<p>3<br>
1G<br>
50M<br>
2T</p>
</blockquote>
<p>è¾“å‡ºï¼š</p>
<blockquote>
<p>50M<br>
1G<br>
2T</p>
</blockquote>
<h2 id="è§£é¢˜æ€è·¯">è§£é¢˜æ€è·¯</h2>
<ul>
<li>ç”¨ä¸€ä¸ªåº•å±‚æ•°ç»„ä¸ºä¸ªæ•°ä¸ºnumçš„åˆ‡ç‰‡æ”¾ä¼ è¿›æ¥çš„å­˜å‚¨æ•°å€¼</li>
<li>å°†æ•°å€¼å•ä½è½¬åŒ–ä¸ºå¯¹åº”ä¸ªæ•°çš„0ï¼Œè½¬åŒ–åçš„å€¼ä½œä¸ºmapçš„keyï¼Œè½¬åŒ–å‰çš„ä¸ºmapçš„value</li>
<li>å†’æ³¡æ’åºå°†åˆ‡ç‰‡æ’åº</li>
<li>éå†åˆ‡ç‰‡ï¼Œæ‹¿åˆ°mapçš„keyï¼Œæ‰“å°å¯¹åº”çš„valueï¼Œå®Œäº‹æ”¶å·¥</li>
</ul>
<h2 id="ä»£ç å®ç°">ä»£ç å®ç°</h2>
<pre><code>package main

import (
	&quot;bufio&quot;
	&quot;fmt&quot;
	&quot;os&quot;
	&quot;strconv&quot;
	&quot;strings&quot;
)

func main() {
	reader := bufio.NewReader(os.Stdin)
	for {
		input1, _, _ := reader.ReadLine()

		inputLen := len(input1)
		if inputLen == 0 {
			break
		}

		num, _ := strconv.Atoi(string(input1))
		inputArr := make([]string,num)
		memoryMp := make(map[string]string)
		for i := 0; i &lt; num; i++ {
			inputNum, _, _ := reader.ReadLine()
			inputArr[i] = string(inputNum)
		}

		for i := 0; i &lt; num; i++ {
			temp := strings.Replace(inputArr[i], &quot;M&quot;, &quot;&quot;, -1)
			temp = strings.Replace(temp, &quot;G&quot;, &quot;000&quot;, -1)
			temp = strings.Replace(temp, &quot;T&quot;, &quot;000000&quot;, -1)
			memoryMp[temp] = inputArr[i]
			inputArr[i] = temp
		}
		fmt.Println(inputArr)
		fmt.Println(memoryMp)
		for i := 0; i &lt; num; i++ {
			flag := false
			for j := 1; j &lt; num-i; j++ {
				pre, _ := strconv.Atoi(inputArr[j-1])
				next, _ := strconv.Atoi(inputArr[j])
				if pre &gt; next {
					temp := inputArr[j-1]
					inputArr[j-1] = inputArr[j]
					inputArr[j] = temp
					flag = true
				}
			}
			if !flag {
				break
			}
		}
		fmt.Println(&quot;æ­£ç¡®çš„æ’åºä¸ºï¼š&quot;)
		fmt.Println(inputArr)
		for i := 0; i &lt; num; i++ {
			fmt.Println(memoryMp[inputArr[i]])
		}
	}
}
</code></pre>
<p>æå®šï¼</p>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[Threadã€Process and Coroutine]]></title>
        <id>https://twFR.github.io/post/threadprocess-and-coroutine/</id>
        <link href="https://twFR.github.io/post/threadprocess-and-coroutine/">
        </link>
        <updated>2019-07-18T02:16:08.000Z</updated>
        <content type="html"><![CDATA[<p>æ¢³ç†ä¸‹çº¿ç¨‹ã€è¿›ç¨‹å’Œåç¨‹<br>
ä¸€å¥è¯æ€»ç»“ï¼šæ¯ä¸ªè¿›ç¨‹æœ‰è‡ªå·±ç‹¬ç«‹çš„åœ°å€ç©ºé—´ï¼Œåˆ†äº«ç³»ç»Ÿèµ„æºï¼›çº¿ç¨‹è®¿é—®éš¶å±è¿›ç¨‹èµ„æºï¼ŒåŒä¸€è¿›ç¨‹æ‰€æœ‰çº¿ç¨‹å…±äº«è¿›ç¨‹æ‰€æœ‰èµ„æºï¼›åç¨‹ç”±ç¨‹åºè‡ªèº«æ§åˆ¶ï¼Œåœ¨å­ç¨‹åºå†…éƒ¨å¯ä¸­æ–­ã€‚</p>
<h2 id="è¿›ç¨‹">è¿›ç¨‹</h2>
<p>ä¸€ä¸ªç¨‹åºè¿è¡Œå°±ä¼šåœ¨å†…å­˜ç©ºé—´é‡Œå½¢æˆä¸€ä¸ªç‹¬ç«‹çš„å†…å­˜ä½“ï¼Œè¿™ä¸ªå†…å­˜ä½“æœ‰è‡ªå·±ç‹¬ç«‹çš„åœ°å€ç©ºé—´å’Œç‹¬ç«‹çš„å †ï¼Œæ“ä½œç³»ç»Ÿä¼šä»¥æ“ä½œç³»ç»Ÿä¼šä»¥è¿›ç¨‹ä¸ºå•ä½ï¼Œåˆ†é…ç³»ç»Ÿèµ„æºï¼ˆCPUæ—¶é—´ç‰‡ã€å†…å­˜ç­‰èµ„æºï¼‰ï¼Œè¿›ç¨‹æ˜¯èµ„æºåˆ†é…çš„æœ€å°å•ä½ã€‚</p>
<p>è¿›ç¨‹æ‰€ç»´æŠ¤çš„æ˜¯ç¨‹åºæ‰€åŒ…å«çš„èµ„æºï¼ˆé™æ€èµ„æºï¼‰ï¼Œ å¦‚ï¼šåœ°å€ç©ºé—´ï¼Œæ‰“å¼€çš„æ–‡ä»¶å¥æŸ„é›†ï¼Œæ–‡ä»¶ç³»ç»ŸçŠ¶æ€ï¼Œä¿¡å·å¤„ç†handlerç­‰ï¼›</p>
<h2 id="çº¿ç¨‹">çº¿ç¨‹</h2>
<p>çº¿ç¨‹ï¼Œæœ‰æ—¶è¢«ç§°ä¸ºè½»é‡çº§è¿›ç¨‹(Lightweight Processï¼ŒLWPï¼‰ï¼Œæ˜¯æ“ä½œç³»ç»Ÿè°ƒåº¦ï¼ˆCPUè°ƒåº¦ï¼‰æ‰§è¡Œçš„æœ€å°å•ä½ã€‚</p>
<p>çº¿ç¨‹æ‰€ç»´æŠ¤çš„è¿è¡Œç›¸å…³çš„èµ„æºï¼ˆåŠ¨æ€èµ„æºï¼‰ï¼Œå¦‚ï¼šè¿è¡Œæ ˆï¼Œè°ƒåº¦ç›¸å…³çš„æ§åˆ¶ä¿¡æ¯ï¼Œå¾…å¤„ç†çš„ä¿¡å·é›†ç­‰ï¼›</p>
<p>åœ¨åˆ›å»ºæˆ–æ’¤æ¶ˆè¿›ç¨‹æ—¶ï¼Œç”±äºç³»ç»Ÿéƒ½è¦ä¸ºä¹‹åˆ†é…å’Œå›æ”¶èµ„æºï¼Œå¯¼è‡´ç³»ç»Ÿçš„å¼€é”€æ˜æ˜¾å¤§äºåˆ›å»ºæˆ–æ’¤æ¶ˆçº¿ç¨‹æ—¶çš„å¼€é”€çº¿ç¨‹æœ‰è‡ªå·±çš„å †æ ˆå’Œå±€éƒ¨å˜é‡ï¼Œä½†çº¿ç¨‹ä¹‹é—´æ²¡æœ‰å•ç‹¬çš„åœ°å€ç©ºé—´ï¼Œä¸€ä¸ªè¿›ç¨‹æ­»æ‰å°±ç­‰äºæ‰€æœ‰çš„çº¿ç¨‹æ­»æ‰ï¼Œæ‰€ä»¥å¤šè¿›ç¨‹çš„ç¨‹åºè¦æ¯”å¤šçº¿ç¨‹çš„ç¨‹åºå¥å£®ï¼Œä½†åœ¨è¿›ç¨‹åˆ‡æ¢æ—¶ï¼Œè€—è´¹èµ„æºè¾ƒå¤§ï¼Œæ•ˆç‡è¦å·®ä¸€äº›ã€‚</p>
<h2 id="åç¨‹">åç¨‹</h2>
<p>åç¨‹ä¸æ˜¯è¢«æ“ä½œç³»ç»Ÿå†…æ ¸æ‰€ç®¡ç†ï¼Œè€Œå®Œå…¨æ˜¯ç”±ç¨‹åºæ‰€æ§åˆ¶ï¼ˆä¹Ÿå°±æ˜¯åœ¨ç”¨æˆ·æ€æ‰§è¡Œï¼‰ã€‚è¿™æ ·å¸¦æ¥çš„å¥½å¤„å°±æ˜¯æ€§èƒ½å¾—åˆ°äº†å¾ˆå¤§çš„æå‡ï¼Œä¸ä¼šåƒçº¿ç¨‹åˆ‡æ¢é‚£æ ·æ¶ˆè€—èµ„æºã€‚</p>
<p>åç¨‹åœ¨å­ç¨‹åºå†…éƒ¨æ˜¯å¯ä¸­æ–­çš„ï¼Œç„¶åè½¬è€Œæ‰§è¡Œåˆ«çš„å­ç¨‹åºï¼Œåœ¨é€‚å½“çš„æ—¶å€™å†è¿”å›æ¥æ¥ç€æ‰§è¡Œã€‚</p>
<p>çº¿ç¨‹é»˜è®¤çš„æ ˆæ˜¯8mï¼Œè€Œä¸€ä¸ªåç¨‹åªéœ€è¦å‡ åkb</p>
<p>æé«˜çš„æ‰§è¡Œæ•ˆç‡ï¼šå› ä¸ºå­ç¨‹åºåˆ‡æ¢ä¸æ˜¯çº¿ç¨‹åˆ‡æ¢ï¼Œè€Œæ˜¯ç”±ç¨‹åºè‡ªèº«æ§åˆ¶ï¼Œå› æ­¤ï¼Œæ²¡æœ‰çº¿ç¨‹åˆ‡æ¢çš„å¼€é”€ï¼Œå’Œå¤šçº¿ç¨‹æ¯”ï¼Œçº¿ç¨‹æ•°é‡è¶Šå¤šï¼Œåç¨‹çš„æ€§èƒ½ä¼˜åŠ¿å°±è¶Šæ˜æ˜¾ï¼›</p>
<p>ä¸éœ€è¦å¤šçº¿ç¨‹çš„é”æœºåˆ¶ï¼šå› ä¸ºåªæœ‰ä¸€ä¸ªçº¿ç¨‹ï¼Œä¹Ÿä¸å­˜åœ¨åŒæ—¶å†™å˜é‡å†²çªï¼Œåœ¨åç¨‹ä¸­æ§åˆ¶å…±äº«èµ„æºä¸åŠ é”ï¼Œåªéœ€è¦åˆ¤æ–­çŠ¶æ€å°±å¥½äº†ï¼Œæ‰€ä»¥æ‰§è¡Œæ•ˆç‡æ¯”å¤šçº¿ç¨‹é«˜å¾ˆå¤šã€‚</p>
<pre><code>type work struct {
	x, y, z int
}

func worker(in &lt;- chan *work, out chan &lt;-  *work) {
	for w := range in{
		w.z = w.x * w.y
		Sleep(w.z)
		out &lt;- w
	}
	}

func Run()  {
	in , out:= make(chan *work), make(chan *work)
	for i:= 0; i&lt; NumWorks; i++{
		go worker(in, out)
	}
	go sendLotsOfWork(in)
	receiveLotsOfResults(out)

}
</code></pre>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[TCP reliable transmission]]></title>
        <id>https://twFR.github.io/post/tcprt/</id>
        <link href="https://twFR.github.io/post/tcprt/">
        </link>
        <updated>2019-06-23T07:29:34.000Z</updated>
        <content type="html"><![CDATA[<p>ğŸ«ä¸€ç›´ä»¥æ¥å¯¹TCPè¿æ¥çš„å¯é æ€§ï¼Œä¸‰æ¬¡æ¡æ‰‹ï¼Œå››æ¬¡æŒ¥æ‰‹æœ‰è¿‡äº†è§£ï¼Œä½†è¦ç»„ç»‡è¯­è¨€è¯´å‡ºæ¥å¥½åƒè¿˜çœŸä¸å®¹æ˜“ï¼Œä»Šå¤©å°±ç³»ç»Ÿçš„è®°å½•ä¸€ä¸‹ï¼Œä»¥ä¾›æ›´åŠ æ·±å…¥çš„ç†è§£ã€‚</p>
<h2 id="ä¸ºä»€ä¹ˆè¯´tcpå¯é ">ä¸ºä»€ä¹ˆè¯´TCPå¯é </h2>
<p>ğŸ”—è¯´åˆ°tcpå¯é æ€§ï¼Œå°±è¦å…ˆæ¥çœ‹çœ‹tcpæœ‰å“ªäº›ç‰¹ç‚¹äº†ï¼Œtcpæ˜¯é¢å‘è¿æ¥çš„ï¼Œé¢å‘å­—èŠ‚æµ çš„è¿æ¥ï¼Œèƒ½é€šè¿‡ä¸¢åŒ…é‡å‘,è¶…æ—¶é‡è¯•ç­‰æ–¹å¼ä¿è¯å¯é ä¼ è¾“ï¼Œä¸”æ”¯æŒå…¨åŒå·¥é€šä¿¡ï¼Œæ”¯æŒç«¯å£åˆ°ç«¯å£çš„è¿æ¥ï¼Œæ¯ä¸€æ¡TCPè¿æ¥åªèƒ½æœ‰ä¸¤ä¸ªç«¯ç‚¹ã€‚<br>
<font size="2">psï¼šå…¨åŒå·¥æŒ‡å¯ä»¥åŒæ—¶ï¼ˆç¬æ—¶ï¼‰è¿›è¡Œä¿¡å·çš„åŒå‘ä¼ è¾“ï¼ˆAâ†’Bä¸”Bâ†’Aï¼‰ã€‚æŒ‡Aâ†’Bçš„åŒæ—¶Bâ†’Aï¼Œæ˜¯ç¬æ—¶åŒæ­¥çš„ã€‚</font><br /></p>
<p>ğŸ”tcpçš„å¯é æ€§æ˜¯é€šè¿‡ä¸‹é¢å‡ ç‚¹æ¥å®ç°çš„</p>
<ul>
<li>
<p>æ ¡éªŒå’Œ ç«¯åˆ°ç«¯çš„æ ¡éªŒå’Œï¼Œç”±å‘é€ç«¯è®¡ç®—ï¼Œç„¶åç”±æ¥æ”¶ç«¯éªŒè¯ã€‚å…¶ç›®çš„æ˜¯ä¸ºäº†å‘ç°TCPé¦–éƒ¨å’Œæ•°æ®åœ¨å‘é€ç«¯åˆ°æ¥æ”¶ç«¯ä¹‹é—´å‘ç”Ÿçš„ä»»ä½•æ”¹åŠ¨ã€‚å¦‚æœæ¥æ”¶æ–¹æ£€æµ‹åˆ°æ ¡éªŒå’Œæœ‰å·®é”™ï¼Œåˆ™TCPæ®µä¼šè¢«ç›´æ¥ä¸¢å¼ƒã€‚</p>
</li>
<li>
<p>åºåˆ—å·ï¼ˆæŒ‰åºåˆ°è¾¾ï¼‰</p>
</li>
<li>
<p>ç¡®è®¤åº”ç­”ï¼ˆACKï¼‰æœºåˆ¶  TCPå°†æ¯ä¸ªå­—èŠ‚çš„æ•°æ®éƒ½è¿›è¡Œäº†ç¼–å·ï¼Œå³ä¸ºåºåˆ—å·ï¼Œæ¯ä¸€ä¸ªACKéƒ½å¸¦æœ‰å¯¹åº”çš„ç¡®è®¤åºåˆ—å·, æ„æ€æ˜¯å‘Šè¯‰å‘é€è€…, æˆ‘å·²ç»æ”¶åˆ°äº†å“ªäº›æ•°æ®ï¼Œä¸‹ä¸€æ¬¡ä½ ä»å“ªé‡Œå¼€å§‹å‘ã€‚</p>
</li>
<li>
<p>è¶…æ—¶é‡ä¼ æœºåˆ¶  åœ¨ä¸€ä¸ªç‰¹å®šæ—¶é—´é—´éš”å†…æ²¡æœ‰æ”¶åˆ°å‘æ¥çš„ç¡®è®¤åº”ç­”, ä¼šè¿›è¡Œé‡å‘ã€‚è¶…æ—¶çš„æ—¶é—´é•¿çŸ­æ˜¯é€šè¿‡åŠ¨æ€ç¡®å®šçš„ï¼Œä»¥500msä¸ºä¸€ä¸ªå•ä½è¿›è¡Œæ§åˆ¶ï¼Œå¦‚æœé‡å‘ä¸€æ¬¡ä¹‹å, ä»ç„¶å¾—ä¸åˆ°åº”ç­”, ç­‰å¾… 2*500ms åå†è¿›è¡Œé‡ä¼ ï¼Œä¾æ¬¡ç±»æ¨, ä»¥æŒ‡æ•°å½¢å¼é€’å¢ï¼Œ ç´¯è®¡åˆ°ä¸€å®šçš„é‡ä¼ æ¬¡æ•°, TCPè®¤ä¸ºç½‘ç»œæˆ–è€…å¯¹ç«¯ä¸»æœºå‡ºç°å¼‚å¸¸, å¼ºåˆ¶å…³é—­è¿æ¥ã€‚</p>
</li>
<li>
<p>æµé‡æ§åˆ¶  å½“æ¥å—æ–¹æ¥ä¸åŠå¤„ç†å‘é€æ–¹çš„æ•°æ®ï¼Œèƒ½æç¤ºå‘é€æ–¹é™ä½å‘é€çš„é€Ÿç‡ï¼Œé˜²æ­¢åŒ…ä¸¢å¤± ï¼›é€šè¿‡çª—å£æ¥æ§åˆ¶ ï¼ˆçª—å£å¤§å°å­—æ®µè¶Šå¤§, è¯´æ˜ç½‘ç»œçš„ååé‡è¶Šé«˜ï¼Œçª—å£åœ¨ä¸‹æ–‡æŠ¥æ–‡æ®µé‡Œçš„16ä½å­—æ®µï¼‰</p>
</li>
<li>
<p>æ‹¥å¡æ§åˆ¶ ä¸€å¼€å§‹ä¸ç¡®å®šç½‘ç»œçŠ¶æ€ï¼Œå¦‚æœä¸€ä¸‹å‘é€å¤§é‡æ•°æ®ï¼Œå¯èƒ½ä¼šå¯¼è‡´ç½‘ç»œæ‹¥å µï¼Œæ‰€ä»¥æ§åˆ¶ä»å°åˆ°å¤§ï¼Œæ…¢æ…¢å¢å¤§æ§åˆ¶æ§åˆ¶æ‹¥å¡çª—å£æ•°å€¼ï¼Œå…·ä½“å®ç°å¦‚ä¸‹ï¼š<br>
1ï¼‰TCPè¿æ¥åˆå§‹åŒ–ï¼Œå°†æ‹¥å¡çª—å£è®¾ç½®ä¸º1<br>
2ï¼‰æ‰§è¡Œæ…¢å¼€å§‹ç®—æ³•ï¼Œcwindï¼ˆæ‹¥å¡çª—å£ï¼‰æŒ‰æŒ‡æ•°è§„å¾‹å¢é•¿ï¼Œç›´åˆ°cwind == ssthressï¼ˆæ…¢å¼€å§‹é—¨é™ï¼‰å¼€å§‹æ‰§è¡Œæ‹¥å¡é¿å…ç®—æ³•ï¼ŒcwndæŒ‰çº¿æ€§è§„å¾‹å¢é•¿<br>
3ï¼‰å½“ç½‘ç»œå‘ç”Ÿæ‹¥å¡ï¼ŒæŠŠssthreshå€¼æ›´æ–°ä¸ºæ‹¥å¡å‰ssthreshå€¼çš„ä¸€åŠï¼Œcwndé‡æ–°è®¾ç½®ä¸º1ï¼ŒæŒ‰ç…§æ­¥éª¤ï¼ˆ2ï¼‰æ‰§è¡Œã€‚</p>
</li>
</ul>
<p>ğŸ‘é€šè¿‡è¿™å…­ä¸ªç­–ç•¥ï¼Œä¿éšœäº†tcpè¿æ¥çš„å¯é æ€§</p>
<h2 id="çœ‹çœ‹tcpæŠ¥æ–‡æ®µæ ¼å¼">çœ‹çœ‹TCPæŠ¥æ–‡æ®µæ ¼å¼</h2>
<figure data-type="image" tabindex="1"><img src="http://img4.imgtn.bdimg.com/it/u=2627348429,2184604078&amp;fm=214&amp;gp=0.jpg" alt="TCPæŠ¥æ–‡æ®µ" title="TCPæŠ¥æ–‡æ®µ" loading="lazy"></figure>
<p>ğŸ‘¨ğŸ»â€ğŸ’»è§£é‡Šä¸‹å„ä¸ªå­—æ®µç”¨é€”ï¼š</p>
<ul>
<li>æº/ç›®çš„ç«¯å£å·: è¡¨ç¤ºæ•°æ®æ˜¯ä»å“ªä¸ªè¿›ç¨‹æ¥, åˆ°å“ªä¸ªè¿›ç¨‹å»ï¼›</li>
<li>4å­—èŠ‚åºåˆ—å·ï¼ˆseqï¼‰/32ä½ç¡®è®¤å·ï¼ˆackï¼‰:ç›¸äº’ååŒï¼Œä¿è¯å¯é æ€§ï¼Œä¿è¯æŒ‰åºåˆ°è¾¾ã€‚</li>
<li>4ä½TCPæŠ¥å¤´é•¿åº¦: è¡¨ç¤ºè¯¥TCPå¤´éƒ¨æœ‰å¤šå°‘ä¸ª32ä½bit(æœ‰å¤šå°‘ä¸ª4å­—èŠ‚); æ‰€ä»¥TCPå¤´éƒ¨æœ€å¤§é•¿åº¦æ˜¯15 * 4 = 60</li>
<li>6ä½æ ‡å¿—ä½:<br>
URG: ç´§æ€¥æŒ‡é’ˆæ˜¯å¦æœ‰æ•ˆ<br>
ACK: ç¡®è®¤å·æ˜¯å¦æœ‰æ•ˆ<br>
PSH: æç¤ºæ¥æ”¶ç«¯åº”ç”¨ç¨‹åºç«‹åˆ»ä»TCPç¼“å†²åŒºæŠŠæ•°æ®è¯»èµ°<br>
RST: å¯¹æ–¹è¦æ±‚é‡æ–°å»ºç«‹è¿æ¥ï¼Œæˆ‘ä»¬æŠŠæºå¸¦RSTæ ‡è¯†çš„ç§°ä¸ºå¤ä½æŠ¥æ–‡æ®µ<br>
SYN: è¯·æ±‚å»ºç«‹è¿æ¥ï¼Œæˆ‘ä»¬æŠŠæºå¸¦SYNæ ‡è¯†çš„ç§°ä¸ºåŒæ­¥æŠ¥æ–‡æ®µ<br>
FIN: é€šçŸ¥å¯¹æ–¹, æœ¬ç«¯è¦å…³é—­äº†, æˆ‘ä»¬ç§°æºå¸¦FINæ ‡è¯†çš„ä¸ºç»“æŸæŠ¥æ–‡æ®µ</li>
<li>16ä½çª—å£å¤§å°:è‡ªå·±çš„æ¥æ”¶ç¼“å†²åŒºå¤§å°ï¼ˆæ²¡é”™ï¼Œå°±æ˜¯å‰é¢æµé‡æ§åˆ¶çš„çª—å£ï¼‰</li>
<li>6ä½æ ¡éªŒå’Œ: å‘é€ç«¯å¡«å……, CRCæ ¡éªŒ. æ¥æ”¶ç«¯æ ¡éªŒä¸é€šè¿‡, åˆ™è®¤ä¸ºæ•°æ®æœ‰é—®é¢˜. æ­¤å¤„çš„æ£€éªŒå’Œä¸å…‰åŒ…å«TCPé¦–éƒ¨, ä¹ŸåŒ…å«TCPæ•°æ®éƒ¨åˆ†.</li>
<li>16ä½ç´§æ€¥æŒ‡é’ˆ: æ ‡è¯†å“ªéƒ¨åˆ†æ•°æ®æ˜¯ç´§æ€¥æ•°æ®<br>
PSï¼šACKã€SYNå’ŒFINè¿™äº›å¤§å†™çš„å•è¯è¡¨ç¤ºæ ‡å¿—ä½ï¼Œå…¶å€¼è¦ä¹ˆæ˜¯1ï¼Œè¦ä¹ˆæ˜¯0ï¼›ackã€seqå°å†™çš„å•è¯è¡¨ç¤ºåºå·ã€‚</li>
</ul>
<h2 id="tcpå»ºç«‹è¿æ¥ä¸‰æ¬¡æ¡æ‰‹">TCPå»ºç«‹è¿æ¥ï¼ˆä¸‰æ¬¡æ¡æ‰‹ï¼‰</h2>
<p><img src="https://ss1.bdstatic.com/70cFuXSh_Q1YnxGkpoWK1HF6hhy/it/u=3554453119,3518152184&amp;fm=15&amp;gp=0.jpg" alt="ä¸‰æ¬¡æ¡æ‰‹" title="ä¸‰æ¬¡æ¡æ‰‹" loading="lazy"><br>
ğŸ¤ç¬¬ä¸€æ¬¡æ¡æ‰‹ï¼šå»ºç«‹è¿æ¥æ—¶ï¼Œå®¢æˆ·ç«¯ã€CLOSED -&gt; SYN_SENTã€‘å‘é€synåŒ…ï¼ˆSYN=1ï¼Œseq=xï¼‰åˆ°æœåŠ¡å™¨ï¼Œå¹¶è¿›å…¥SYN_SENTçŠ¶æ€ï¼Œç­‰å¾…æœåŠ¡å™¨ã€CLOSED-&gt;LISTENã€‘ç¡®è®¤ï¼›SYNï¼šåŒæ­¥åºåˆ—ç¼–å·ï¼ˆSynchronize Sequence Numbersï¼‰ã€‚</p>
<p>ğŸ¤ç¬¬äºŒæ¬¡æ¡æ‰‹ï¼šæœåŠ¡å™¨æ”¶åˆ°synåŒ…ï¼Œå¿…é¡»ç¡®è®¤å®¢æˆ·çš„SYNï¼ŒåŒæ—¶æœåŠ¡å™¨ã€LISTEN-&gt;SYN_RCVDã€‘ä¹Ÿå‘é€ä¸€ä¸ªSYNåŒ…ï¼ˆSYN=1ï¼ŒACK=1ï¼Œseq=yï¼Œack=x+1ï¼‰ï¼Œæ­¤æ—¶æœåŠ¡å™¨è¿›å…¥SYN_RCVDçŠ¶æ€ï¼›</p>
<p>ğŸ¤ç¬¬ä¸‰æ¬¡æ¡æ‰‹ï¼šå®¢æˆ·ç«¯æ”¶åˆ°æœåŠ¡å™¨çš„åŒæ­¥åŒ…ï¼Œå‘æœåŠ¡å™¨å‘é€ç¡®è®¤åŒ…ACK(ack=y+1ï¼‰ï¼Œæ­¤åŒ…å‘é€å®Œæ¯•ï¼Œå®¢æˆ·ç«¯ã€SYN_SENT -&gt; ESTABLISHEDã€‘å’ŒæœåŠ¡å™¨ã€SYN_RCVD -&gt; ESTABLISHEDã€‘è¿›å…¥ESTABLISHEDï¼ˆTCPè¿æ¥æˆåŠŸï¼‰çŠ¶æ€ï¼Œå®Œæˆä¸‰æ¬¡æ¡æ‰‹ã€‚</p>
<p><font size="3">psï¼šå‘é€æŠ¥æ–‡æ®µç¡®è®¤å·å®é™…å°±ä¸ºæ”¶åˆ°çš„æŠ¥æ–‡æ®µåºåˆ—å·åŠ 1ï¼Œä»¥ä¿è¯æŒ‰åºåˆ°è¾¾</font><br /></p>
<h2 id="tcpå…³é—­è¿æ¥å››æ¬¡æŒ¥æ‰‹">TCPå…³é—­è¿æ¥ï¼ˆå››æ¬¡æŒ¥æ‰‹ï¼‰</h2>
<p><img src="http://img0.ph.126.net/silia0LWWddxSzcvFjPHQQ==/6632311313349802875.png" alt="ä¸‰æ¬¡æ¡æ‰‹" title="ä¸‰æ¬¡æ¡æ‰‹" loading="lazy"><br>
ğŸ™‹ç¬¬ä¸€æ¬¡æŒ¥æ‰‹ï¼šå®¢æˆ·ç«¯è¿›ç¨‹å‘å‡ºè¿æ¥é‡Šæ”¾æŠ¥æ–‡ï¼Œå¹¶ä¸”åœæ­¢å‘é€æ•°æ®ã€‚é‡Šæ”¾æ•°æ®æŠ¥æ–‡é¦–éƒ¨ï¼ŒFIN=1ï¼Œå…¶åºåˆ—å·ä¸ºseq=uï¼ˆç­‰äºå‰é¢å·²ç»ä¼ é€è¿‡æ¥çš„æ•°æ®çš„æœ€åä¸€ä¸ªå­—èŠ‚çš„åºå·åŠ 1ï¼‰ï¼Œæ­¤æ—¶ï¼Œå®¢æˆ·ç«¯è¿›å…¥FIN-WAIT-1ï¼ˆç»ˆæ­¢ç­‰å¾…1ï¼‰çŠ¶æ€ã€‚ TCPè§„å®šï¼ŒFINæŠ¥æ–‡æ®µå³ä½¿ä¸æºå¸¦æ•°æ®ï¼Œä¹Ÿè¦æ¶ˆè€—ä¸€ä¸ªåºå·ã€‚</p>
<p>ğŸ™‹â€â™‚ï¸ç¬¬äºŒæ¬¡æŒ¥æ‰‹ï¼šæœåŠ¡å™¨æ”¶åˆ°è¿æ¥é‡Šæ”¾æŠ¥æ–‡ï¼Œå‘å‡ºç¡®è®¤æŠ¥æ–‡ï¼ŒACK=1ï¼Œack=u+1ï¼Œå¹¶ä¸”å¸¦ä¸Šè‡ªå·±çš„åºåˆ—å·seq=vï¼Œæ­¤æ—¶ï¼ŒæœåŠ¡ç«¯å°±è¿›å…¥äº†CLOSE-WAITï¼ˆå…³é—­ç­‰å¾…ï¼‰çŠ¶æ€ã€‚TCPæœåŠ¡å™¨é€šçŸ¥é«˜å±‚çš„åº”ç”¨è¿›ç¨‹ï¼Œå®¢æˆ·ç«¯å‘æœåŠ¡å™¨çš„æ–¹å‘å°±é‡Šæ”¾äº†ï¼Œè¿™æ—¶å€™å¤„äºåŠå…³é—­çŠ¶æ€ï¼Œå³å®¢æˆ·ç«¯å·²ç»æ²¡æœ‰æ•°æ®è¦å‘é€äº†ï¼Œä½†æ˜¯æœåŠ¡å™¨è‹¥å‘é€æ•°æ®ï¼Œå®¢æˆ·ç«¯ä¾ç„¶è¦æ¥å—ã€‚è¿™ä¸ªçŠ¶æ€è¿˜è¦æŒç»­ä¸€æ®µæ—¶é—´ï¼Œä¹Ÿå°±æ˜¯æ•´ä¸ªCLOSE-WAITçŠ¶æ€æŒç»­çš„æ—¶é—´ã€‚</p>
<p>ğŸ™‹ç¬¬ä¸‰æ¬¡æŒ¥æ‰‹ï¼šå®¢æˆ·ç«¯æ”¶åˆ°æœåŠ¡å™¨çš„ç¡®è®¤è¯·æ±‚åï¼Œæ­¤æ—¶ï¼Œå®¢æˆ·ç«¯å°±è¿›å…¥FIN-WAIT-2ï¼ˆç»ˆæ­¢ç­‰å¾…2ï¼‰çŠ¶æ€ï¼Œç­‰å¾…æœåŠ¡å™¨å‘é€è¿æ¥é‡Šæ”¾æŠ¥æ–‡ï¼ˆåœ¨è¿™ä¹‹å‰è¿˜éœ€è¦æ¥å—æœåŠ¡å™¨å‘é€çš„æœ€åçš„æ•°æ®ï¼‰ã€‚æœåŠ¡å™¨å°†æœ€åçš„æ•°æ®å‘é€å®Œæ¯•åï¼Œå°±å‘å®¢æˆ·ç«¯å‘é€è¿æ¥é‡Šæ”¾æŠ¥æ–‡ï¼ŒFIN=1ï¼Œack=u+1ï¼Œç”±äºåœ¨åŠå…³é—­çŠ¶æ€ï¼ŒæœåŠ¡å™¨å¾ˆå¯èƒ½åˆå‘é€äº†ä¸€äº›æ•°æ®ï¼Œå‡å®šæ­¤æ—¶çš„åºåˆ—å·ä¸ºseq=wï¼Œæ­¤æ—¶ï¼ŒæœåŠ¡å™¨å°±è¿›å…¥äº†LAST-ACKï¼ˆæœ€åç¡®è®¤ï¼‰çŠ¶æ€ï¼Œç­‰å¾…å®¢æˆ·ç«¯çš„ç¡®è®¤ã€‚</p>
<p>ğŸ™‹â€â™‚ï¸ç¬¬å››æ¬¡æŒ¥æ‰‹ï¼šå®¢æˆ·ç«¯æ”¶åˆ°æœåŠ¡å™¨çš„è¿æ¥é‡Šæ”¾æŠ¥æ–‡åï¼Œå¿…é¡»å‘å‡ºç¡®è®¤ï¼ŒACK=1ï¼Œack=w+1ï¼Œè€Œè‡ªå·±çš„åºåˆ—å·æ˜¯seq=u+1ï¼Œæ­¤æ—¶ï¼Œå®¢æˆ·ç«¯å°±è¿›å…¥äº†TIME-WAITï¼ˆæ—¶é—´ç­‰å¾…ï¼‰çŠ¶æ€ã€‚æ³¨æ„æ­¤æ—¶TCPè¿æ¥è¿˜æ²¡æœ‰é‡Šæ”¾ï¼Œå¿…é¡»ç»è¿‡2MSLï¼ˆæœ€é•¿æŠ¥æ–‡æ®µå¯¿å‘½ï¼‰çš„æ—¶é—´åï¼Œå½“å®¢æˆ·ç«¯æ’¤é”€ç›¸åº”çš„TCBåï¼Œæ‰è¿›å…¥CLOSEDçŠ¶æ€ã€‚æœåŠ¡å™¨åªè¦æ”¶åˆ°äº†å®¢æˆ·ç«¯å‘å‡ºçš„ç¡®è®¤ï¼Œç«‹å³è¿›å…¥CLOSEDçŠ¶æ€ã€‚åŒæ ·ï¼Œæ’¤é”€TCBåï¼Œå°±ç»“æŸäº†è¿™æ¬¡çš„TCPè¿æ¥ã€‚å¯ä»¥çœ‹åˆ°ï¼ŒæœåŠ¡å™¨ç»“æŸTCPè¿æ¥çš„æ—¶é—´è¦æ¯”å®¢æˆ·ç«¯æ—©ä¸€äº›ã€‚</p>
<h2 id="åè¯">åè¯</h2>
<ul>
<li>
<p>å…³é—­è¿æ¥ä¹‹æ‰€ä»¥æ¯”å»ºç«‹è¿æ¥å¤šä¸€æ­¥æ˜¯å› ä¸ºï¼Œå»ºç«‹è¿æ¥çš„æ—¶å€™æœåŠ¡ç«¯æ”¶åˆ°å»ºç«‹è¿æ¥çš„è¯·æ±‚åå¯ä»¥ç›´æ¥å‘é€ç¡®è®¤å·æ ‡å¿—ï¼ˆACK=1ï¼‰å’ŒåŒæ­¥å·æ ‡å¿—ï¼ˆSYN=1ï¼‰æ¥ç¡®è®¤å»ºç«‹è¿æ¥ï¼Œä½†æ˜¯å…³é—­çš„æ—¶å€™ï¼Œå®¢æˆ·ç«¯å‘é€å…³é—­è¯·æ±‚çš„æ—¶å€™ï¼Œå¯èƒ½æœåŠ¡ç«¯æ•°æ®è¿˜æ²¡æœ‰ä¼ é€å®Œï¼Œæ‰€ä»¥è¦å…ˆå‘ä¸€ä¸ªç¡®è®¤å·æ ‡å¿—ï¼ˆACK=1ï¼‰è¡¨ç¤ºæˆ‘æ”¶åˆ°ä½ è¦å…³é—­çš„è¯·æ±‚äº†ï¼Œä½†æˆ‘è¦å…ˆæŠŠä¸œè¥¿ç»™ä½ å‘é€å®Œï¼Œå‘é€å®Œä¹‹åå†å‘é€ä¸€ä¸ªå…³é—­æ ‡ç¤ºå…³é—­è¿æ¥</p>
</li>
<li>
<p>TIME_WAITçŠ¶æ€éœ€è¦ç»è¿‡2MSLæ‰èƒ½è¿”å›åˆ°CLOSEçŠ¶æ€æ˜¯å› ä¸ºç½‘ç»œå¯èƒ½ä¸å¯é ï¼Œå®¢æˆ·ç«¯å‘é€çš„ç¡®è®¤åº”ç­”æŠ¥æ–‡æœåŠ¡ç«¯æ²¡æœ‰æ”¶åˆ°ï¼Œè¿™ä¸ªæ—¶é—´æ˜¯æ¥æ¥å—åˆå¯èƒ½ä»æœåŠ¡ç«¯é‡å‘è¿‡æ¥çš„ç¡®è®¤æŠ¥æ–‡ï¼Œå¦‚æœæ”¶åˆ°äº†å®¢æˆ·ç«¯å°±é‡å‘ä¸€æ¬¡å®¢æˆ·ç«¯çš„ç¡®è®¤æŠ¥æ–‡ï¼Œå¦‚æœç›´åˆ°2MSLï¼ŒClientéƒ½æ²¡æœ‰å†æ¬¡æ”¶åˆ°FINï¼Œé‚£ä¹ˆClientæ¨æ–­ACKå·²ç»è¢«æˆåŠŸæ¥æ”¶ï¼Œåˆ™ç»“æŸTCPè¿æ¥ã€‚MSLæŒ‡ä¸€ä¸ªç‰‡æ®µåœ¨ç½‘ç»œä¸­æœ€å¤§çš„å­˜æ´»æ—¶é—´ï¼Œ2MSLå°±æ˜¯ä¸€ä¸ªå‘é€å’Œä¸€ä¸ªå›å¤æ‰€éœ€çš„æœ€å¤§æ—¶é—´ã€‚</p>
</li>
</ul>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[Golang Timer]]></title>
        <id>https://twFR.github.io/post/golang-timer/</id>
        <link href="https://twFR.github.io/post/golang-timer/">
        </link>
        <updated>2019-06-09T09:53:16.000Z</updated>
        <content type="html"><![CDATA[<p>æˆ‘ä»¬trmé‡Œé¢æœ‰ä¸ªkube-systemé¡¹ç›®ï¼Œç”±äºæ˜¯k8sçš„å†…ç½®namespaceï¼Œæ‰€ä»¥åˆ›å»ºçš„æ—¶é—´æ¯”è¾ƒæ—©ï¼Œåœ¨å½“æ—¶çš„æƒ…å†µä¸‹æ²¡æœ‰åŠæ³•åœ¨cfeåˆ›å»ºicagentçš„å®ˆæŠ¤è¿›ç¨‹ï¼Œæ‰€ä»¥ä»¥å‰æ²¡æœ‰é»˜è®¤å¼€å¯å¹³å°ç›‘æ§è¿™ä¸ªåŠŸèƒ½ã€‚</p>
<p>ç„¶åæœ‰åŒäº‹ååº”å¿…é¡»è¦å¼€å¯ï¼Œä¸ç„¶å°±ä¸èƒ½åšåˆ°æ—¥å¿—è½¬å‚¨ï¼Œå¯¼è‡´ç£ç›˜ç©ºé—´å æ»¡ï¼Œäºæ˜¯æˆ‘æƒ³åˆ°äº†ä¸€ä¸ªåŠæ³•ï¼Œä¹‹æ‰€ä»¥æ²¡åŠæ³•å¼€å¯ï¼Œæ˜¯å› ä¸ºå½“æ—¶çš„æ¡ä»¶åˆ›ä¸å‡ºæ¥ï¼Œä½†æ˜¯ç­‰åˆ°ç¯å¢ƒå®‰è£…åˆ°ä¸€å®šè¿›åº¦åï¼Œæœ‰æ¡ä»¶äº†å°±å¯ä»¥åˆ›å»ºå‡ºæ¥äº†ã€‚å¯ä»¥è®¾è®¡ä¸€ä¸ªå®šæ—¶å™¨ï¼Œåœ¨åˆ›å»ºè¿™ä¸ªé¡¹ç›®çš„æ—¶å€™å°±å¼€å§‹åˆ›è¿™ä¸ªicagent ï¼Œæ¯éš”20ç§’åˆ›å»ºä¸€æ¬¡ï¼Œç›´åˆ°åˆ›å»ºæˆåŠŸã€‚<br>
å®šæ—¶å™¨è®¾è®¡å¦‚ä¸‹ï¼š</p>
<pre><code>func CreateProject() {
	PresetProject() //åˆ›å»ºkube-system
	go func() {
		isSucceed := false //è®¾ç½®æ ‡å¿—ä½
		logger.info(&quot;start try to create icagent daemonset&quot;)
		for !isSucceed {
			err := createIcagent()
			if err == nil {
				isSucceed = true
				logger.info(&quot;create icagent daemonset succeed&quot;)
			}
			time.Sleep(20 * time.Second)
		}
	}()
	return
}
</code></pre>
<p>ä¸€ä¸ªå¾ˆç®€å•çš„å®šæ—¶å™¨ï¼Œç”¨isSucceedä½œä¸ºæ ‡å¿—ä½ï¼Œå¦‚æœæ˜¯å¤±è´¥çš„å°±ä¸€ç›´å¾ªç¯åˆ›å»ºï¼Œä¸€æ—¦æˆåŠŸï¼Œå°±é€€å‡ºäº†è¿™ä¸ªgoroutineã€‚</p>
]]></content>
    </entry>
</feed>